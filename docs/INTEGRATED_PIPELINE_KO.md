# ğŸ¬ í†µí•© íŒŒì´í”„ë¼ì¸ - í•œ ë²ˆì— ëª¨ë“  ê²ƒ!

> ë™ì˜ìƒ 1ê°œë¥¼ ì…ë ¥í•˜ë©´ **íŠ¹ì§•ì  ì¶”ì¶œ â†’ ì‹¤ì‹œê°„ ë§¤ì¹­ â†’ ì‹œê°í™”**ê°€ ìë™ìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤!

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘ (1ë‹¨ê³„!)

```bash
# ë™ì˜ìƒ ë˜ëŠ” ì´ë¯¸ì§€ í´ë”ë¥¼ ì…ë ¥í•˜ë©´ ë!
python scripts/integrated_matching.py --input your_video.mp4
```

**ê·¸ê²ƒë§Œìœ¼ë¡œ ëª¨ë“  ê²Œ ëœë‹¤!** âœ¨

---

## ğŸ“Š ì²˜ë¦¬ íë¦„

```
ë™ì˜ìƒ ë˜ëŠ” ì´ë¯¸ì§€ í´ë” ì…ë ¥
         â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Frame 1 ì²˜ë¦¬        â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ 1. SuperPoint ì‹¤í–‰   â”‚
   â”‚    â†“ íŠ¹ì§•ì  ì¶”ì¶œ    â”‚
   â”‚ 2. ì €ì¥í•˜ê³  ë‹¤ìŒìœ¼ë¡œâ”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Frame 2 ì²˜ë¦¬        â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ 1. SuperPoint ì‹¤í–‰   â”‚
   â”‚    â†“ íŠ¹ì§•ì  ì¶”ì¶œ    â”‚
   â”‚ 2. Frame 1ê³¼ ë§¤ì¹­    â”‚
   â”‚    â†“ GPU ê°€ì†       â”‚
   â”‚ 3. ì‹œê°í™” & ì €ì¥    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Frame 3, 4, 5...   â”‚
   â”‚  ê³„ì† ë°˜ë³µ!          â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
   ë§¤ì¹­ ê²°ê³¼ í´ë”ì— ì €ì¥ âœ…
```

---

## ğŸ’» ì‚¬ìš© ì˜ˆì œ

### ì˜ˆì œ 1: ê¸°ë³¸ ì‚¬ìš© (ë™ì˜ìƒ)

```bash
python scripts/integrated_matching.py --input video.mp4
```

### ì˜ˆì œ 2: ì´ë¯¸ì§€ í´ë” ì²˜ë¦¬

```bash
python scripts/integrated_matching.py --input ./my_images/
```

### ì˜ˆì œ 3: ì»¤ìŠ¤í…€ ì„¤ì •

```bash
# ë§¤ì¹­ ë¯¼ê°ë„ ì¡°ì ˆ
python scripts/integrated_matching.py \
    --input video.mp4 \
    --nn_thresh 0.8 \
    --output my_results

# CPUë§Œ ì‚¬ìš© (GPU ì—†ëŠ” ê²½ìš°)
python scripts/integrated_matching.py \
    --input video.mp4 \
    --no_cuda

# ì‹¤ì‹œê°„ í‘œì‹œ ë¹„í™œì„±í™” (ì¡°ìš©í•œ ì²˜ë¦¬)
python scripts/integrated_matching.py \
    --input video.mp4 \
    --no_display
```

---

## ğŸ“ ê²°ê³¼ í´ë” êµ¬ì¡°

```
matching_results_integrated/          (ê¸°ë³¸ê°’, --outputìœ¼ë¡œ ë³€ê²½ ê°€ëŠ¥)
â”‚
â”œâ”€â”€ frames/                           ë§¤ì¹­ ì‹œê°í™” ì´ë¯¸ì§€
â”‚   â”œâ”€â”€ frame_00001_heatmap.png
â”‚   â”œâ”€â”€ frame_00002_heatmap.png
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ features/                         íŠ¹ì§•ì  ë°ì´í„° (NPY)
â”‚   â”œâ”€â”€ frame_00001_pts.npy
â”‚   â”œâ”€â”€ frame_00001_desc.npy
â”‚   â”œâ”€â”€ frame_00001_heatmap.npy
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ matches_viz/                      ë§¤ì¹­ ì‹œê°í™” ì´ë¯¸ì§€
â”‚   â”œâ”€â”€ frame_00001_frame_00002_matches.png
â”‚   â”œâ”€â”€ frame_00002_frame_00003_matches.png
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ matches_data/                     ë§¤ì¹­ ë°ì´í„° (NPY)
    â”œâ”€â”€ frame_00001_frame_00002_matches.npy
    â”œâ”€â”€ frame_00002_frame_00003_matches.npy
    â””â”€â”€ ...
```

---

## ğŸ“Š ê²°ê³¼ ë¶„ì„

### ë§¤ì¹­ ì´ë¯¸ì§€ ë³´ê¸°
```bash
# Windows
start matching_results_integrated\matches_viz\frame_00001_frame_00002_matches.png

# Mac/Linux
open matching_results_integrated/matches_viz/frame_00001_frame_00002_matches.png
```

### ë°ì´í„° ë¡œë“œ (Python)
```python
import numpy as np

# ë§¤ì¹­ ë°ì´í„° ë¡œë“œ
data = np.load('matching_results_integrated/matches_data/frame_00001_frame_00002_matches.npy',
              allow_pickle=True).item()

matches = data['matches']          # (L, 3) [idx1, idx2, distance]
inlier_mask = data['inlier_mask']  # (L,) ì‹ ë¢°ë„ ë†’ì€ ë§¤ì¹­

print(f"ë§¤ì¹­: {len(matches)}ê°œ")
print(f"Inliers: {np.sum(inlier_mask)}ê°œ")

# íŠ¹ì§•ì  ë°ì´í„° ë¡œë“œ
pts = np.load('matching_results_integrated/features/frame_00001_pts.npy')
desc = np.load('matching_results_integrated/features/frame_00001_desc.npy')
heatmap = np.load('matching_results_integrated/features/frame_00001_heatmap.npy')

print(f"íŠ¹ì§•ì : {pts.shape[1]}ê°œ")
print(f"ë””ìŠ¤í¬ë¦½í„°: {desc.shape}")
```

---

## âš™ï¸ íŒŒë¼ë¯¸í„° ì„¤ëª…

| ì˜µì…˜ | ê¸°ë³¸ê°’ | ì„¤ëª… |
|------|--------|------|
| `--input` | í•„ìˆ˜ | ì…ë ¥: ë™ì˜ìƒ ë˜ëŠ” ì´ë¯¸ì§€ í´ë” |
| `--output` | `matching_results_integrated` | ê²°ê³¼ ì €ì¥ ë””ë ‰í† ë¦¬ |
| `--weights` | `superpoint_v1.pth` | SuperPoint ê°€ì¤‘ì¹˜ íŒŒì¼ |
| `--nn_thresh` | `0.7` | ë§¤ì¹­ ê±°ë¦¬ ì„ê³„ê°’ (0.5-1.0) |
| `--no_cuda` | - | GPU ì‚¬ìš© ì•ˆ í•¨ (CPUë§Œ ì‚¬ìš©) |
| `--no_display` | - | ì½˜ì†” ì¶œë ¥ ë¹„í™œì„±í™” |

---

## ğŸ¯ ì¼ë°˜ì ì¸ ì‚¬ìš© ì¼€ì´ìŠ¤

### ì¼€ì´ìŠ¤ 1: ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ (ì´ë¯¸ì§€ í´ë”)
```bash
python scripts/integrated_matching.py --input assets/icl_snippet/
```
â†’ ê²°ê³¼: `matching_results_integrated/` ìë™ ìƒì„±

### ì¼€ì´ìŠ¤ 2: ì¥ì‹œê°„ ë¹„ë””ì˜¤ ì²˜ë¦¬
```bash
python scripts/integrated_matching.py --input long_video.mp4 --no_display
```
â†’ ì½˜ì†” ì¶œë ¥ ì—†ì´ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì¡°ìš©íˆ ì²˜ë¦¬

### ì¼€ì´ìŠ¤ 3: GPU ë©”ëª¨ë¦¬ ë¶€ì¡±
```bash
python scripts/integrated_matching.py --input video.mp4 --no_cuda
```
â†’ CPUë¡œ ì²˜ë¦¬ (ëŠë¦¬ì§€ë§Œ ë©”ëª¨ë¦¬ ì‚¬ìš© ì ìŒ)

### ì¼€ì´ìŠ¤ 4: ë†’ì€ ì •í™•ë„ í•„ìš”
```bash
python scripts/integrated_matching.py --input video.mp4 --nn_thresh 0.6
```
â†’ ë” ì—„ê²©í•œ ë§¤ì¹­ (ë§¤ì¹­ ê°œìˆ˜ â†“, ì •í™•ë„ â†‘)

### ì¼€ì´ìŠ¤ 5: ë” ë§ì€ ë§¤ì¹­ í•„ìš”
```bash
python scripts/integrated_matching.py --input video.mp4 --nn_thresh 0.9
```
â†’ ë” ê´€ëŒ€í•œ ë§¤ì¹­ (ë§¤ì¹­ ê°œìˆ˜ â†‘, ì •í™•ë„ â†“)

---

## ğŸ’¡ ì²˜ë¦¬ íë¦„ ìƒì„¸

### Frame 1 ì²˜ë¦¬
```
Frame 1 ë¡œë“œ
   â†“
SuperPointë¡œ íŠ¹ì§•ì  ì¶”ì¶œ â†’ pts1, desc1
   â†“
ì €ì¥í•˜ê³  ìƒíƒœ ì—…ë°ì´íŠ¸
   â†“
ë‹¤ìŒ í”„ë ˆì„ìœ¼ë¡œ!
```

### Frame 2 ì²˜ë¦¬
```
Frame 2 ë¡œë“œ
   â†“
SuperPointë¡œ íŠ¹ì§•ì  ì¶”ì¶œ â†’ pts2, desc2
   â†“
GPU BT-Matcherë¡œ Frame 1ê³¼ ë§¤ì¹­
   â†“
RANSACìœ¼ë¡œ ê¸°í•˜í•™ì  ê²€ì¦
   â†“
ë§¤ì¹­ ì´ë¯¸ì§€ ì‹œê°í™” & ì €ì¥
   â†“
íŠ¹ì§•ì  ë°ì´í„° ì €ì¥ (Frame 2 â†’ Frame 3ìœ¼ë¡œ ì‚¬ìš©)
   â†“
ë‹¤ìŒ í”„ë ˆì„ìœ¼ë¡œ!
```

### Frame 3, 4, 5... (ê³„ì† ë°˜ë³µ)

---

## ğŸ“ˆ ì„±ëŠ¥

| í•­ëª© | ì„±ëŠ¥ |
|------|------|
| íŠ¹ì§•ì  ì¶”ì¶œ | ~100-200ms per frame (GPU) |
| ë§¤ì¹­ | ~10-50ms per pair (GPU) |
| ì´ ì²˜ë¦¬ ì‹œê°„ | ~110-250ms per frame |
| ì˜ˆìƒ FPS | ~4-9 FPS (GPU) |

---

## ğŸ¬ ì¶œë ¥ ì˜ˆì‹œ

ì‹¤í–‰ ì¤‘:
```
============================================================
ì²˜ë¦¬ ì‹œì‘: 100 í”„ë ˆì„
============================================================

[  1/100] frame_00001: íŠ¹ì§•ì = 512ê°œ, ë§¤ì¹­=   0ê°œ (Inliers:   0), ì‹œê°„=0.15s, FPS=6.7
[  5/100] frame_00005: íŠ¹ì§•ì = 487ê°œ, ë§¤ì¹­= 345ê°œ (Inliers: 298), ì‹œê°„=0.18s, FPS=5.6
[ 10/100] frame_00010: íŠ¹ì§•ì = 523ê°œ, ë§¤ì¹­= 398ê°œ (Inliers: 347), ì‹œê°„=0.17s, FPS=5.9
...
[100/100] frame_00100: íŠ¹ì§•ì = 505ê°œ, ë§¤ì¹­= 378ê°œ (Inliers: 321), ì‹œê°„=0.16s, FPS=6.2

============================================================
ì²˜ë¦¬ ì™„ë£Œ!
ì´ ì‹œê°„: 17.34s
í‰ê·  FPS: 5.8
ê²°ê³¼ ì €ì¥: matching_results_integrated
============================================================
```

---

## â“ FAQ

**Q: ë™ì˜ìƒê³¼ ì´ë¯¸ì§€ í´ë” ëª¨ë‘ ì§€ì›í•˜ë‚˜?**  
A: âœ… ë„¤, ë‘˜ ë‹¤ ì§€ì›í•©ë‹ˆë‹¤!

**Q: ì‹¤ì‹œê°„ í”„ë¦¬ë·°ê°€ ë‚˜íƒ€ë‚˜ë‚˜?**  
A: ê¸°ë³¸ì ìœ¼ë¡œ ì½˜ì†”ì—ë§Œ ì¶œë ¥ë©ë‹ˆë‹¤. ë§¤ì¹­ ì´ë¯¸ì§€ëŠ” ì €ì¥ë©ë‹ˆë‹¤.

**Q: GPUê°€ ì—†ìœ¼ë©´?**  
A: `--no_cuda` ì˜µì…˜ìœ¼ë¡œ CPUë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (ëŠë¦´ ìˆ˜ ìˆìŒ).

**Q: ë§¤ì¹­ ê°œìˆ˜ê°€ ì ìœ¼ë©´?**  
A: `--nn_thresh 0.9`ë¡œ ë” ê´€ëŒ€í•˜ê²Œ ì„¤ì •í•˜ì„¸ìš”.

**Q: ë§¤ì¹­ ê°œìˆ˜ê°€ ë§ìœ¼ë©´?**  
A: `--nn_thresh 0.5`ë¡œ ë” ì—„ê²©í•˜ê²Œ ì„¤ì •í•˜ì„¸ìš”.

**Q: ê¸´ ë¹„ë””ì˜¤ ì²˜ë¦¬í•˜ë©´?**  
A: `--no_display` ì˜µì…˜ìœ¼ë¡œ ì½˜ì†” ì¶œë ¥ì„ ë¹„í™œì„±í™”í•˜ë©´ ë” ë¹ ë¦…ë‹ˆë‹¤.

---

## ğŸ”§ ë¬¸ì œ í•´ê²°

### ë¬¸ì œ: "superpoint_v1.pthë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ"
```bash
# ê°€ì¤‘ì¹˜ íŒŒì¼ ê²½ë¡œ ì§€ì •
python scripts/integrated_matching.py --input video.mp4 --weights ./superpoint_v1.pth
```

### ë¬¸ì œ: "CUDA out of memory"
```bash
# CPU ì‚¬ìš©ìœ¼ë¡œ ë³€ê²½
python scripts/integrated_matching.py --input video.mp4 --no_cuda
```

### ë¬¸ì œ: "ë¹„ë””ì˜¤ í¬ë§·ì„ ì§€ì›í•˜ì§€ ì•ŠìŒ"
```bash
# ì´ë¯¸ì§€ë¡œ ë³€í™˜
# ë˜ëŠ” ì§€ì›í•˜ëŠ” í¬ë§·(MP4, AVI, MOV)ìœ¼ë¡œ ë³€í™˜
```

---

## ğŸ“š ë‹¤ìŒ ë‹¨ê³„

ë§¤ì¹­ ê²°ê³¼ê°€ ìƒì„±ë˜ë©´:
1. âœ… `matches_viz/` í´ë”ì—ì„œ ì‹œê°í™” ì´ë¯¸ì§€ í™•ì¸
2. âœ… `matches_data/` í´ë”ì—ì„œ ë§¤ì¹­ ë°ì´í„° ë¶„ì„
3. âœ… `features/` í´ë”ì—ì„œ íŠ¹ì§•ì  ë°ì´í„° ì‚¬ìš©

ì¶”ê°€ ë¶„ì„:
- Pythonì—ì„œ ë°ì´í„° ë¡œë“œí•˜ì—¬ 3D ì‚¼ê°ì¸¡ëŸ‰
- SLAM ë°±ì—”ë“œì™€ í†µí•©
- êµ¬ì¡° ë³µì› (Structure from Motion)

---

**ì´ê²ƒì´ ë‹¹ì‹ ì´ ì›í•˜ë˜ ê²ƒì…ë‹ˆë‹¤! ğŸ‰**

ë™ì˜ìƒ í•˜ë‚˜ë§Œ ì…ë ¥í•˜ë©´ ëª¨ë“  ì²˜ë¦¬ê°€ ìë™ìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤!
